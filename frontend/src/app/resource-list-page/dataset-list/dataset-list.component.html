<mat-sidenav-container class="persistent-header-spacer sidenav">

  <!-- CREATE SIDENAV -->
  <mat-sidenav #uploadSidenav mode="side" position="end" [(opened)]="uploadSidenavOpened" style="border-left: 1px solid #f5f5f5;">
    <!-- CREATE NEW  -->
    <div *ngIf="currentRightSidenav=='createNew'; then createNewBlock else createVersionBlock"></div>
    <ng-template #createNewBlock>
      <h3 style=" margin-left: 16px;">Create New Dataset<mat-icon style="float:right; cursor: pointer;" (click)="uploadSidenav.close()">close</mat-icon>
      </h3>
      <mat-divider></mat-divider>
      <form style="margin: 16px; ">
        <mat-form-field style="width:100%">
          <input matInput placeholder="Algorithm Name" #name>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Version Name" #version>
        </mat-form-field>
        <mat-form-field style="width:100%">
          <textarea matInput placeholder="Description" #desc></textarea>
        </mat-form-field>
        <button mat-raised-button color="primary" style="float: right; margin-top: 16px" (click)="createNewDataset(name.value, desc.value)">CREATE</button>
      </form>
    </ng-template>
    <!-- NEW VERSION -->
    <ng-template #createVersionBlock>
      <h3 style=" margin-left: 16px;">New Version<mat-icon style="float:right; cursor: pointer;" (click)="uploadSidenav.close()">close</mat-icon>
      </h3>
      <mat-divider></mat-divider>
      <form style="margin: 16px;">
        <mat-form-field style="width:100%">
          <input matInput value="{{selectedDatasetName}}" #desc>
        </mat-form-field>
        <mat-form-field style="width:100%">
            <input matInput placeholder="Version Name" #version>
          </mat-form-field>
        <mat-form-field style="width:100%">
          <textarea matInput placeholder="Description" #name></textarea>
        </mat-form-field>
        <button mat-raised-button color="primary" style="float: right; margin-top: 16px" (click)="createNewVersion(name.value, version.value); currentRightSidenav='createNew'">CREATE</button>
      </form>
    </ng-template>
  </mat-sidenav>

  <!-- DETAIL SIDENAV -->
  <mat-sidenav #detailSidenav mode="side" position="start" [(opened)]="detailSidenavOpened" style="border-right: 1px solid #f5f5f5;">
    <div *ngIf="currentLeftSidenav=='detail'; then detailBlock else versionBlock"></div>
    <ng-template #detailBlock>
      <h2>{{selectedDatasetName}}<mat-icon style="float:right; cursor: pointer;" (click)="detailSidenav.close()">close</mat-icon>
      </h2>
      <mat-divider></mat-divider>
      <div class="spacer"></div>
      <mat-card class="sidenav-card">
        <mat-card-title>
          Description
        </mat-card-title>
        <mat-card-content>
          {{selectedDatasetDesc}}
        </mat-card-content>
      </mat-card>
      <div class="spacer"></div>
      <mat-card class="sidenav-card">
        <mat-card-title>
          <p>Versions<mat-icon style="float: right; cursor: pointer;" (click)="addVersion()">add</mat-icon>
          </p>
        </mat-card-title>
        <mat-card-content>
          <mat-list dense>
            <mat-list-item *ngFor="let ver of versions" (click)="openVersion(ver.versionName)" class="version-item">
              <h4 mat-line>{{ver.versionName}}</h4>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
      </mat-card>
      <div class="spacer"></div>
        <mat-card class="sidenav-card">
          <mat-card-title>
            <p>Permissions<mat-icon style="float: right; cursor: pointer;">add</mat-icon>
            </p>
          </mat-card-title>
          <mat-card-content>
            <mat-list dense>
              <mat-list-item *ngFor="let perm of permissions" class="version-item">
                <h4 mat-line>{{perm.name}}</h4>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
      </mat-card>
    </ng-template>
    <ng-template #versionBlock>
      <h2>{{selectedDatasetName}} - {{selectedDataVersionName}}<mat-icon style="float:right; cursor:pointer;" (click)="currentLeftSidenav='detail'">close</mat-icon>
      </h2>
      <mat-divider></mat-divider>
      <div class="spacer"></div>
      <mat-card class="sidenav-card">
        <mat-card-title>
          Description
        </mat-card-title>
        <mat-card-content>
          {{selectedDatasetDesc}}
        </mat-card-content>
      </mat-card>
      <button mat-raised-button color="primary" style="float: right; margin-top: 16px; margin-right: 16px" (click)="openDownloadSnackBar()">DOWNLOAD</button>
    </ng-template>
  </mat-sidenav>

  <!-- DATASET LIST -->
  <mat-sidenav-content>
    <h2 style="margin-left: 16px">Datasets <button mat-button (click)="openUploadSidenav()" color="primary" class="upload-button">CREATE
        NEW</button></h2>

    <table mat-table [dataSource]="dataSource" class="table">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let data"> {{data.dataName}} </td>
      </ng-container>

      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef> Description </th>
        <td mat-cell *matCellDef="let data"> {{data.description}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="datset-row" (click)="openDetailSidenav(row.dataName, row.description)"></tr>
    </table>
  </mat-sidenav-content>
</mat-sidenav-container>